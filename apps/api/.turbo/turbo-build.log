
> @promptrepo/api@0.0.1 build /Users/arieperini/dev/promptrepo/apps/api
> tsc

[96msrc/__tests__/errors.test.ts[0m:[93m57[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m57[0m       expect(body.ok).toBe(false);
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/errors.test.ts[0m:[93m58[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m58[0m       expect(body.error.code).toBe("VALIDATION_ERROR");
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/errors.test.ts[0m:[93m67[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m67[0m       expect(body.ok).toBe(false);
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/errors.test.ts[0m:[93m68[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m68[0m       expect(body.error.code).toBe("VALIDATION_ERROR");
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/errors.test.ts[0m:[93m108[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m108[0m       expect(body.ok).toBe(false);
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/errors.test.ts[0m:[93m109[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m109[0m       expect(body.error.code).toBe("INTERNAL");
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/projects.test.ts[0m:[93m94[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m94[0m       expect(body.ok).toBe(false);
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/projects.test.ts[0m:[93m95[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m95[0m       expect(body.error.code).toBe("UNAUTHORIZED");
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/projects.test.ts[0m:[93m164[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m164[0m       expect(body.ok).toBe(false);
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/projects.test.ts[0m:[93m165[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m165[0m       expect(body.error.code).toBe("VALIDATION_ERROR");
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/projects.test.ts[0m:[93m243[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m243[0m       expect(body.ok).toBe(false);
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/projects.test.ts[0m:[93m244[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m244[0m       expect(body.error.code).toBe("NOT_FOUND");
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m47[0m:[93m53[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ data: { id: string; name: string; visibility: string; }[]; error: null; }' is not assignable to parameter of type 'PostgrestSingleResponse<any>'.
  Type '{ data: { id: string; name: string; visibility: string; }[]; error: null; }' is missing the following properties from type 'PostgrestResponseSuccess<any>': count, status, statusText

[7m47[0m       vi.mocked(mockSupabase.rpc).mockResolvedValue({
[7m  [0m [91m                                                    ~[0m
[7m48[0m         data: mockProjects,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m49[0m         error: null,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[7m50[0m       });
[7m  [0m [91m~~~~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m66[0m:[93m53[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ data: never[]; error: null; }' is not assignable to parameter of type 'PostgrestSingleResponse<any>'.
  Type '{ data: never[]; error: null; }' is missing the following properties from type 'PostgrestResponseSuccess<any>': count, status, statusText

[7m66[0m       vi.mocked(mockSupabase.rpc).mockResolvedValue({
[7m  [0m [91m                                                    ~[0m
[7m67[0m         data: [],
[7m  [0m [91m~~~~~~~~~~~~~~~~~[0m
[7m68[0m         error: null,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[7m69[0m       });
[7m  [0m [91m~~~~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m85[0m:[93m9[0m - [91merror[0m[90m TS2739: [0mType '{ message: string; code: string; }' is missing the following properties from type 'PostgrestError': details, hint, name

[7m85[0m         error: { message: "Database error", code: "INTERNAL" },
[7m  [0m [91m        ~~~~~[0m

  [96m../../node_modules/.pnpm/@supabase+postgrest-js@1.21.3/node_modules/@supabase/postgrest-js/dist/cjs/types.d.ts[0m:[93m20[0m:[93m5[0m
    [7m20[0m     error: PostgrestError;
    [7m  [0m [96m    ~~~~~[0m
    The expected type comes from property 'error' which is declared here on type 'PostgrestSingleResponse<any>'

[96msrc/__tests__/public.test.ts[0m:[93m93[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m93[0m       expect(body.ok).toBe(false);
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m94[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m94[0m       expect(body.error.code).toBe("INTERNAL");
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m108[0m:[93m53[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ data: { id: string; name: string; visibility: string; }[]; error: null; }' is not assignable to parameter of type 'PostgrestSingleResponse<any>'.
  Type '{ data: { id: string; name: string; visibility: string; }[]; error: null; }' is missing the following properties from type 'PostgrestResponseSuccess<any>': count, status, statusText

[7m108[0m       vi.mocked(mockSupabase.rpc).mockResolvedValue({
[7m   [0m [91m                                                    ~[0m
[7m109[0m         data: [mockProject],
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m110[0m         error: null,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[7m111[0m       });
[7m   [0m [91m~~~~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m127[0m:[93m53[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ data: never[]; error: null; }' is not assignable to parameter of type 'PostgrestSingleResponse<any>'.
  Type '{ data: never[]; error: null; }' is missing the following properties from type 'PostgrestResponseSuccess<any>': count, status, statusText

[7m127[0m       vi.mocked(mockSupabase.rpc).mockResolvedValue({
[7m   [0m [91m                                                    ~[0m
[7m128[0m         data: [],
[7m   [0m [91m~~~~~~~~~~~~~~~~~[0m
[7m129[0m         error: null,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[7m130[0m       });
[7m   [0m [91m~~~~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m137[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m137[0m       expect(body.ok).toBe(false);
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m138[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m138[0m       expect(body.error.code).toBe("NOT_FOUND");
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m147[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m147[0m       expect(body.ok).toBe(false);
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m148[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m148[0m       expect(body.error.code).toBe("VALIDATION_ERROR");
[7m   [0m [91m             ~~~~[0m

[96msrc/__tests__/public.test.ts[0m:[93m156[0m:[93m53[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ data: never[]; error: null; }' is not assignable to parameter of type 'PostgrestSingleResponse<any>'.
  Type '{ data: never[]; error: null; }' is missing the following properties from type 'PostgrestResponseSuccess<any>': count, status, statusText

[7m156[0m       vi.mocked(mockSupabase.rpc).mockResolvedValue({
[7m   [0m [91m                                                    ~[0m
[7m157[0m         data: [],
[7m   [0m [91m~~~~~~~~~~~~~~~~~[0m
[7m158[0m         error: null,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[7m159[0m       });
[7m   [0m [91m~~~~~~~[0m

[96msrc/__tests__/rateLimit.test.ts[0m:[93m66[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m66[0m       expect(body.ok).toBe(false);
[7m  [0m [91m             ~~~~[0m

[96msrc/__tests__/rateLimit.test.ts[0m:[93m67[0m:[93m14[0m - [91merror[0m[90m TS18046: [0m'body' is of type 'unknown'.

[7m67[0m       expect(body.error.code).toBe("RATE_LIMIT");
[7m  [0m [91m             ~~~~[0m


Found 26 errors in 4 files.

Errors  Files
     6  src/__tests__/errors.test.ts[90m:57[0m
     6  src/__tests__/projects.test.ts[90m:94[0m
    12  src/__tests__/public.test.ts[90m:47[0m
     2  src/__tests__/rateLimit.test.ts[90m:66[0m
[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 1.[39m
